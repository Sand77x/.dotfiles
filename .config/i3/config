# Please see https://i3wm.org/docs/userguide.html for a complete reference!
# Modified by: Rendell Ngo

# set super key as modifier
set $mod Mod4

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# move tiling windows via drag & drop by left-clicking into the title bar,
# or left-clicking anywhere into the window while holding the floating modifier.
tiling_drag modifier titlebar

# !! remember to get noto color for emojis
# !! remember to install lxappearance for theming
# font for window titles, can be overriden in the bar {} block below.
# font pango:monospace 11
font pango:DejaVu Sans Mono 11

# common calls
set $execnsi          exec --no-startup-id
set $execalnsi        exec_always --no-startup-id
set $dify             dunstify -r 6767
set $runsh            sh -c
set $refresh_i3status killall -SIGUSR1 i3status

# directory and file vars
set $ssdir       ~/Pictures/Screenshots

# Start the compositor
$execnsi picom -b

# start policykit authentication agent
$execnsi /usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1

# disable dpms and idle lock
$execnsi xset s off
$execnsi xset -dpms

# !! remember to edit /etc/systemd/logind.conf to override power button and lid switches
# !! remember to install i3lock-color https://github.com/Raymo111/i3lock-color/
# use xss-lock to lock screen right before suspend call via systemctl suspend
# $execnsi xss-lock --transfer-sleep-lock -- i3lock-cool

# Start the notification daemon
$execnsi dunst

# set keyboard layout (disable caps lock)
$execnsi setxkbmap us -option caps:none

# !! remember to install udiskie
# Start udiskie for automounting usbs
$execnsi udiskie

# !! remember to install tuned service for battery saving
# start xidlehook https://github.com/jD91mZM2/xidlehook
$execnsi my-xidlehook
$execnsi $runsh "sleep 1 && toggle-xidlehook check && $refresh_i3status"

# write cache on startup for i3status
$execalnsi i3status-f1
$execnsi   i3status-mic-cam

# Start feh for wallpaper
$execnsi feh --no-fehbg --bg-fill "$HOME/Pictures/Wallpapers/normal.png"

# for people using my laptop
bindsym $mod+Shift+s $execnsi $runsh '$dify "HELP" "win+z to launch programs\nwin+w to close programs\nwin+b to launch browser\nwin+enter to launch terminal"'

# make power button open custom power menu
bindsym XF86PowerOff         $execnsi power-menu

# using pamixer to set volume
bindsym XF86AudioRaiseVolume $execnsi $runsh 'pamixer --allow-boost -i 5  && $dify -i audio-volume-high  " Volume: $(pamixer --get-volume)%"'
bindsym XF86AudioLowerVolume $execnsi $runsh 'pamixer --allow-boost -d 5  && $dify -i audio-volume-low   " Volume: $(pamixer --get-volume)%"'
bindsym XF86AudioMute        $execnsi $runsh 'pamixer -t                  && $dify -i audio-volume-muted " Volume: $(pamixer --get-mute | [ "$(grep true)" = "true" ] && echo Muted || echo Unmuted)"'
bindsym $mod+m               $execnsi $runsh 'pamixer --default-source -t && $dify -i audio-volume-muted " Mic: $(pamixer --default-source --get-mute | [ "$(grep true)" = "true" ] && echo Muted || echo Unmuted)" && i3status-mic-cam && $refresh_i3status'

# enable / disable video
# !! remember to add to sudoers file user ALL=(root) NOPASSWD: /sbin/modprobe
bindsym $mod+c               $execnsi $runsh 'toggle-cam && i3status-mic-cam && $refresh_i3status'

# using light to set brightness
bindsym XF86MonBrightnessUp   $execnsi $runsh '$dify -i weather-clear       " Brightness: $(light -A 10 && light -G | cut -d. -f1)%"'
bindsym XF86MonBrightnessDown $execnsi $runsh '$dify -i weather-clear-night " Brightness: $(light -U 10 && light -G | cut -d. -f1)%"'

# enable / disable xidlehook
bindsym $mod+o       $execnsi toggle-xidlehook && $refresh_i3status

# exec applications
bindsym Shift+Print  $execnsi flameshot gui  -c -p $ssdir
bindsym Print        $execnsi flameshot full -c -p $ssdir
bindsym $mod+a       $execnsi boomer
bindsym $mod+v       $execnsi dmenu-watch
bindsym $mod+Return  exec     alacritty --working-directory ~
bindsym $mod+b       exec     brave-browser

# emoji picker
bindsym $mod+e       $execnsi dmenu-emoji

# mouse keys binds
bindsym $mod+q       $execnsi xdotool click 1
bindsym $mod+Shift+q $execnsi sleep 0.1 && xdotool click --clearmodifiers 3 

# start programs
bindsym $mod+z       $execnsi i3-dmenu-desktop
bindsym $mod+Shift+z $execnsi dmenu_run

# kill windows and processes
bindsym $mod+w       kill
bindsym $mod+Shift+w $execnsi dmenu-pkill

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h     move left
bindsym $mod+Shift+j     move down
bindsym $mod+Shift+k     move up
bindsym $mod+Shift+l     move right

bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+t layout toggle tabbed split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# create splits
# bindsym $mod+h split h
# bindsym $mod+v split v
#
# focus the parent/child container
# bindsym $mod+a focus parent
# bindsym $mod+d focus child

# workspace and window settings
workspace_layout tabbed
smart_borders    on
new_window       normal 1
gaps             inner 0

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"
set $ws10 "10"

# assign programs to workspaces
for_window [class="Brave-browser"]            move container to workspace $ws1; workspace $ws1
for_window [class="Xfce4-terminal|Alacritty"] move container to workspace $ws3; workspace $ws3
for_window [class="discord|steam"]            move container to workspace $ws4; workspace $ws4

# set window to floating by default
for_window [class="Pcmanfm"]                  floating enable; move position center

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1;  workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2;  workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3;  workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4;  workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5;  workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6;  workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7;  workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8;  workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9;  workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10; workspace number $ws10

# workspace binds
bindsym $mod+d workspace back_and_forth

# resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"

mode "resize" {
        # resize bindings
        bindsym h resize shrink width  10 px or 10 ppt
        bindsym j resize grow   height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow   width  10 px or 10 ppt

        bindsym Left  resize shrink width  10 px or 10 ppt
        bindsym Down  resize grow   height 10 px or 10 ppt
        bindsym Up    resize shrink height 10 px or 10 ppt
        bindsym Right resize grow   width  10 px or 10 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

# network manager applet
# bluetooth applet
# exec --no-startup-id nm-applet
# exec --no-startup-id blueman-applet

# colors
set $green_dark   #0f1f17
set $green_med    #1f3d2b
set $green_accent #2e6b4f
set $focus_glow   #6fbf9c
set $text_light   #eaf5ee
set $text_dim     #0b140f

# set window colors     border         background      text         indicator     child border
client.focused          $green_accent  $green_accent   $text_light  $focus_glow   $green_accent
client.focused_inactive $green_med     $green_med      $text_dim    $green_accent $green_med
client.unfocused        $green_dark    $green_dark     $text_light  $green_med    $green_dark
client.urgent           #4a1f2a        #7a2f42         $text_light  #c95a7a       #7a2f42

# start i3bar with i3status
bar {
        colors {
                separator          #4a4a4a
                focused_workspace  #2e6b4f #2e6b4f #eaf5ee
                active_workspace   #1f3d2b #1f3d2b #6fbf9c
                inactive_workspace #0f1f17 #1f3d2b #eaf5ee
                urgent_workspace   #7a2f42 #7a2f42 #ffffff
        }
        separator_symbol "|"
        padding          2 10
        status_command   i3status
}

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

# vim: set ft=sh:
